# طريقة بديلة لتحديث قاعدة البيانات في Railway

بما أن Console غير متاح، إليك 3 طرق بديلة:

---

## الطريقة 1: استخدام Endpoint API (الأسهل) ✅

### الخطوات:

1. **ارفع الكود الجديد أولاً** (سيتم إضافة endpoint جديد):

```bash
git add .
git commit -m "Add fix status endpoint"
git push
```

2. **انتظر حتى يكتمل Deployment في Railway**

3. **افتح المتصفح واذهب إلى**:
```
https://your-railway-app.railway.app/api/fix/fix-status-enum
```

4. **أرسل POST request**:
   - استخدم **Postman** أو **curl** أو أي أداة:
   
   ```bash
   curl -X POST https://your-railway-app.railway.app/api/fix/fix-status-enum
   ```

   أو في Postman:
   - Method: **POST**
   - URL: `https://your-railway-app.railway.app/api/fix/fix-status-enum`

5. **ستحصل على رد مثل**:
```json
{
  "success": true,
  "message": "Status ENUM updated successfully!",
  "updatedRows": 0,
  "newValues": ["approved", "partially_delivered", "delivered_completed"]
}
```

6. **⚠️ مهم جداً: احذف هذا الـ endpoint بعد الاستخدام** من `server.js`

---

## الطريقة 2: استخدام Railway CLI

### 1. ثبت Railway CLI:
```bash
npm i -g @railway/cli
```

### 2. سجل دخول:
```bash
railway login
```

### 3. اختر المشروع:
```bash
railway link
```

### 4. شغل السكربت:
```bash
railway run node backend/update_po_status_enum.js
```

---

## الطريقة 3: استخدام MySQL Client خارجي

### 1. احصل على معلومات الاتصال:
- من Railway Dashboard → MySQL Service → Variables
- احصل على:
  - `MYSQLHOST`
  - `MYSQLPORT`
  - `MYSQLUSER`
  - `MYSQLPASSWORD`
  - `MYSQLDATABASE`

### 2. استخدم MySQL Workbench أو أي client:
- افتح اتصال جديد
- استخدم المعلومات أعلاه
- نفّذ الكود SQL:

```sql
UPDATE purchase_orders 
SET status = 'delivered_completed' 
WHERE status = 'delivered';

ALTER TABLE purchase_orders 
MODIFY COLUMN status ENUM('approved', 'partially_delivered', 'delivered_completed') 
DEFAULT 'approved';
```

---

## الطريقة الموصى بها ✅

**الطريقة 1 (Endpoint API)** هي الأسهل والأسرع!

1. ارفع الكود
2. انتظر Deployment
3. أرسل POST request
4. انتهى!

